<%- include('partials/adminHeader') %>
<%- include('partials/adminNav') %>
<link rel="stylesheet" href="/styles/admin.css">
<%- include('partials/head-body') %>
    
    <h2 class="text-center my-5" id="edit-a-text">Update or Delete posts</h2>
    <section class="mt-5">
    <% data.forEach(entry => { %>    
    <table class="table table-dark">
            <thead class="">
                
                <tr class="">
                    <th>Blog #</th>
                    <th>Title</th>
                    <th>Location</th>
                    <th>Date</th>
                    <th>Region</th>
                    <th>Environment</th>
                    <th>Instagram Link</th>
                    <th>Main Blog</th>
                    <th>Edit</th>
                    <th>Delete</th>

                </tr>
        </thead>
    
                <tr class="">
                    <td class="text-truncate"># <%= entry.blogNumber%></td>
                    <td class="text-truncate"><%= entry.title %></td>
                    <td class="text-truncate"><%= entry.location %></td>
                    <td class="text-truncate"><%= moment(entry.date).format(' MM/DD/YYYY ') %></td>
                    <td class="text-truncate"><%= entry.region %></td>
                    <td class="text-truncate"><%= entry.environment %></td>
                    <td class="text-truncate"><%= entry.instagramLink %></td>
                    <td class="text-truncate"><%= entry.writeUp %></td>
                    <td><a href="/edit/<%= entry._id %>">  
                        <button type="submit" class="btn btn-primary" style="font-size: 15px;">Edit</button>
                        </a>
                    </td>
                    <td>
                        
                        <button type="submit" class="btn btn-danger" data-bs-toggle="modal" id="deleteButton" 
                        data-bs-target="#deleteModal" style="font-size: 14px;">Delete</button>
                        
                        
                        
                        
                    </td>
                </tr>
            </table>
   
</section>

    <div class="modal fade" tabindex="-1" role="dialog" id="deleteModal">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">Are you sure you want to delete this Post?</div>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="close"></button>
                </div>
                <div class="model-body">
                   <p> Thsi will permanently delete Blog #:<span class="fw-bold"> <%= entry.blogNumber %> </span>!</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>

                    <form action="/<%= entry._id %>?_method=DELETE" method="post">
                        <button type="submit" class="btn btn-danger" data-bs-toggle="modal" id="deleteButton" 
                        data-bs-target="#deleteButton" style="font-size: 14px;">Delete</button>
                    </form>

                </div>
            </div>
        </div>
    </div>
    <% }) %>
<%- include('partials/adminFooter') %>